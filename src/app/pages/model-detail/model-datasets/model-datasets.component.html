<div *ngIf="modelDetailData">
  <app-upload-dataset [modelId]="modelDetailData.model_id" />
  <app-model-dataset-link
    [modelId]="modelDetailData.model_id"
    [modelDatasets]="dataSource"
    (updated)="updateDatasets($event)"
  />
  <mat-card class="col-12">
    <mat-card-header>
      <mat-card-title>{{ 'title.model_datasets' | transloco }}</mat-card-title>
    </mat-card-header>
    <mat-card-content class="content">
      <div>
        <div>
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z0">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef>
                {{ 'label.id' | transloco }}
              </th>
              <td mat-cell *matCellDef="let item">
                {{ item.id }}
              </td>
            </ng-container>
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>
                {{ 'label.name' | transloco }}
              </th>
              <td mat-cell *matCellDef="let item">
                {{ item.dataset_name }}
              </td>
            </ng-container>
            <ng-container matColumnDef="description">
              <th mat-header-cell *matHeaderCellDef>
                {{ 'label.description' | transloco }}
              </th>
              <td mat-cell *matCellDef="let item">
                {{ item.description }}
              </td>
            </ng-container>
            <ng-container matColumnDef="dataSourceType">
              <th mat-header-cell *matHeaderCellDef>
                {{ 'label.dataset_type' | transloco }}
              </th>
              <td mat-cell *matCellDef="let item">
                {{ getDatasetTypeLabel(item.data_source_type) }}
              </td>
            </ng-container>
            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef>
                {{ 'label.action' | transloco }}
              </th>
              <td mat-cell *matCellDef="let item">
                <button
                  mat-icon-button
                  [matTooltip]="'hint.open' | transloco"
                  class="iconbutton"
                  color="primary"
                  (click)="open(item.dataset_id)"
                >
                  <mat-icon>open_in_browser</mat-icon>
                </button>
                <button
                  mat-icon-button
                  [matTooltip]="'hint.unlink' | transloco"
                  class="iconbutton"
                  color="primary"
                  (click)="unlinkDatasetFromModel(item.id)"
                >
                  <mat-icon class="icon">link_off</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <ng-template matNoDataRow>
              <tr>
                <td [colSpan]="displayedColumns.length" class="no-data">
                  {{ 'message.no_data' | transloco }}
                </td>
              </tr>
            </ng-template>
          </table>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
